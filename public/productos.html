<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cafe Sabrosos - Productos</title>
    <link rel="stylesheet" href="../public/assets/css/productos.css" />
    <link rel="icon" href="/public/assets/img/logo-removebg-preview.png" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
</head>

<body>
    <header>
        <nav>
            <div class="logo">
                <a href="/" class="logo-link">
                    <img src="/public/assets/img/logo-removebg-preview.png" alt="Logo" class="logo-image" />
                    <h1>Café Sabrosos</h1>
                </a>
            </div>
            <ul class="nav-links">
                <li><a href="/public/local.html">Locales</a></li>
                <li><a href="#">Productos</a></li>
                <li><a href="#">Ofertas</a></li>
                <li><a href="#">Reservas</a></li>
                <li><a href="/public/contactos.html">Contacto</a></li>
                <li>
                    <a href="/public/cuenta.php"><img src="/public/assets/img/image.png" alt="Usuario"
                            class="user-icon" /></a>
                </li>
                <div class="cart">
                    <a href="carrito.html">
                        <img src="/public/assets/img/cart.png" alt="Carrito" />
                        <span id="cart-counter" class="cart-counter">0</span>
                    </a>
                </div>
            </ul>
        </nav>
        <div class="header-content">
            <h2 class="top-subtitle">Café Sabrosos</h2>
            <h2 class="subtitle">Siempre el mejor café</h2>
            <div class="header-buttons">
                <a href="/public/menu.html" class="btn">Menú</a>
                <a href="/public/reservas.html" class="btn">Reservas</a>
            </div>
        </div>
    </header>
    <main>
        <div id="main-category">
            <h1 class="main-category-title">Nuestros productos</h1>
            <div class="product-grid">
                <!-- Categorías principales -->
                <div class="product-item" data-category="Cafés Especiales" data-category-id="1">
                    <div class="image-container">
                        <img src="/public/assets/img/categorias/cafe-especiales.jpg" alt="Producto 1" />
                    </div>
                    <h3>
                        Cafés <br />
                        Especiales
                    </h3>
                </div>
                <div class="product-item" data-category="Cafés con Leche" data-category-id="2">
                    <div class="image-container">
                        <img src="/public/assets/img/categorias/capuccino.jpg" alt="Producto 2" />
                    </div>
                    <h3>
                        Cafés <br />
                        con Leche
                    </h3>
                </div>
                <div class="product-item" data-category="Cafés Fríos" data-category-id="3">
                    <div class="image-container">
                        <img src="/public/assets/img/categorias/cafe-frio.jpg" alt="Producto 3" />
                    </div>
                    <h3>Cafés Fríos</h3>
                </div>
                <div class="product-item" data-category="Pasteles y Postres" data-category-id="4">
                    <div class="image-container">
                        <img src="/public/assets/img/categorias/pastel-y-tortas.jpg" alt="Producto 4" />
                    </div>
                    <h3>
                        Pasteles y <br />
                        Postres
                    </h3>
                </div>
                <div class="product-item" data-category="Té" data-category-id="5">
                    <div class="image-container">
                        <img src="/public/assets/img/categorias/tipos-de-te.jpg" alt="Producto 5" />
                    </div>
                    <h3>Té</h3>
                </div>
                <div class="product-item" data-category="Sandwich y Bocadillos" data-category-id="6">
                    <div class="image-container">
                        <img src="/public/assets/img/categorias/bocadillo.jpg" alt="Producto 6" />
                    </div>
                    <h3>
                        Sandwiches y <br />
                        Bocadillos
                    </h3>
                </div>
            </div>
        </div>

        <div id="category-details" style="display: none" class="content-container">
            <!-- Aquí se insertará el contenido dinámico para la categoría seleccionada -->

    </main>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const productItems = document.querySelectorAll(".product-item");
            const mainCategory = document.getElementById("main-category");
            const categoryDetails = document.getElementById("category-details");

            // Función para mostrar productos según la categoría
            function loadProducts(category, idCategoria) {
                fetch(`/src/db/product.php?idCategoria=${idCategoria}`)
                    .then((response) => response.json())
                    .then((data) => {
                        let productosHtml = "";
                        data.forEach((producto) => {
                            const precio = parseFloat(producto.precio); // Convierte el precio a un número
                            productosHtml += `
                        <div class="product-item">
                        <a href="productos.php?id=${producto.idProducto}" class="image-link">
                            <div class="image-container">
                                <img src="${producto.imagen}" alt="${producto.nombre}">
                            </div>
                        </a>
                        <h3>${producto.nombre}</h3>
                        <span class="precio">$${precio.toFixed(2)}</span>
                    </div>
                    `;
                        });

                        // Actualizar el contenido del sidebar y los productos
                        categoryDetails.innerHTML = `
                    <h1>${category.replace(/-/g, " ")}</h1>
                    <div class="main-content">
                        <div class="sidebar">
                            <h2>Nuestras categorías</h2>
                            <div class="category-item${category === "Cafés Especiales" ? " selected" : ""}" data-category="Cafés Especiales" data-category-id="1">
                                <img src="/public/assets/img/categorias/cafe-especiales.jpg" alt="Cafés Especiales">
                                <p>Cafés Especiales</p>
                            </div>
                            <div class="category-item${category === "Cafés con Leche" ? " selected" : ""}" data-category="Cafés con Leche" data-category-id="2">
                                <img src="/public/assets/img/categorias/cafe-con-leche.jpg" alt="Café con Leche">
                                <p>Cafés con Leche</p>
                            </div>
                            <div class="category-item${category === "Cafés Fríos" ? " selected" : ""}" data-category="Cafés Fríos" data-category-id="3">
                                <img src="/public/assets/img/categorias/cafe-frio.jpg" alt="Cafés Fríos">
                                <p>Cafés Fríos</p>
                            </div>
                            <div class="category-item${category === "Pasteles y Postres" ? " selected" : ""}" data-category="Pasteles y Postres" data-category-id="4">
                                <img src="/public/assets/img/categorias/pastel-y-tortas.jpg" alt="Postres">
                                <p>Pasteles y Postres</p>
                            </div>
                            <div class="category-item${category === "Té" ? " selected" : ""}" data-category="Té" data-category-id="5">
                                <img src="/public/assets/img/categorias/tipos-de-te.jpg" alt="Té">
                                <p>Té</p>
                            </div>
                            <div class="category-item${category === "Sandwich y Bocadillos" ? " selected" : ""}" data-category="Sandwich y Bocadillos" data-category-id="6">
                                <img src="/public/assets/img/categorias/bocadillo.jpg" alt="Sandwiches">
                                <p>Sandwiches y Bocadillos</p>
                            </div>
                        </div>
                        <div class="product-grid">
                            ${productosHtml}
                        </div>
                    </div>
                `;

                        // Añadir eventos a las categorías del sidebar
                        addSidebarEvents();
                    })
                    .catch((error) => console.error("Error:", error));
            }

            // Evento para las categorías principales
            productItems.forEach((item) => {
                item.addEventListener("click", function () {
                    const category = this.getAttribute("data-category");
                    const idCategoria = this.getAttribute("data-category-id");

                    // Ocultar categorías principales y mostrar los detalles
                    mainCategory.style.display = "none";
                    categoryDetails.style.display = "block";

                    // Cargar productos para la categoría seleccionada
                    loadProducts(category, idCategoria);
                });
            });

            // Función para añadir eventos a las categorías del sidebar
            function addSidebarEvents() {
                const categories = document.querySelectorAll(".sidebar .category-item");

                categories.forEach((category) => {
                    category.addEventListener("click", function () {
                        const sidebarCategory = this.getAttribute("data-category");
                        const sidebarIdCategoria = this.getAttribute("data-category-id");

                        // Actualizar el estado visual
                        categories.forEach((item) => item.classList.remove("selected"));
                        this.classList.add("selected");

                        // Cargar productos para la categoría seleccionada desde el sidebar
                        loadProducts(sidebarCategory, sidebarIdCategoria);
                    });
                });
            }

            // Inicializar eventos en las categorías del sidebar
            addSidebarEvents();
        });
    </script>
    <script>
    </script>
    <footer>
        <div class="footer-content">
            <div class="footer-section about">
                <h3>Café Sabrosos</h3>
                <p>
                    Disfruta del mejor café con nosotros. Nos preocupamos por cada
                    detalle, desde la selección de los granos hasta la preparación de tu
                    bebida.
                </p>
                <div class="socials">
                    <a href="#"><i class="fa fa-facebook"></i></a>
                    <a href="#"><i class="fa fa-instagram"></i></a>
                    <a href="#"><i class="fa fa-twitter"></i></a>
                </div>
            </div>
            <div class="footer-section links">
                <h3>Enlaces Rápidos</h3>
                <ul>
                    <li><a href="/public/local.html">Locales</a></li>
                    <li><a href="#">Productos</a></li>
                    <li><a href="#">Ofertas</a></li>
                    <li><a href="#">Reservas</a></li>
                    <li><a href="/public/contactos.html">Contacto</a></li>
                </ul>
            </div>
            <div class="footer-section contact">
                <h3>Contáctanos</h3>
                <ul>
                    <li><i class="fa fa-map-marker"></i> 123 Calle Café, San José</li>
                    <li><i class="fa fa-phone"></i> +598 123 4567</li>
                    <li><i class="fa fa-envelope"></i> info@cafesabrosos.com</li>
                </ul>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 Café Sabrosos. Todos los derechos reservados.</p>
        </div>
    </footer>
</body>

</html>